<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Alpha-Beta剪枝极大极小博弈算法-五子棋AI实现 | 二十七</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Alpha-Beta剪枝极大极小博弈算法-五子棋AI实现</h1><a id="logo" href="/.">二十七</a><p class="description">一笔一画</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Alpha-Beta剪枝极大极小博弈算法-五子棋AI实现</h1><div class="post-meta">2017-02-25<span> | </span><span class="category"><a href="/categories/Algorithm/">Algorithm</a></span></div><div class="post-content"><h3 id="写在最前"><a href="#写在最前" class="headerlink" title="写在最前"></a>写在最前</h3><p>蹭着AI 的热度，让我慢慢对 AI 算法有了兴趣，刚刚好因为实训，有机会完成了这个五子棋的 AI 程序，算法基于极大极小博弈树，实现语言为 Java ，如果有兴趣，可访问开源地址： <a href="https://github.com/rockzhai/AI-Wuziqi" target="_blank" rel="noopener">https://github.com/rockzhai/AI-Wuziqi</a> ，如果喜欢，欢迎star或者提出宝贵意见。</p>
<p>另：对于AI算法的这次尝试，很多地方未作深入研究，有些问题尚未顾及到，因而任重道远，这块领域神秘并且富有乐趣，孜孜不倦才是进步之道。</p>
<a id="more"></a>
<h3 id="算法核心"><a href="#算法核心" class="headerlink" title="算法核心"></a>算法核心</h3><p>关于五子棋玩法不做赘述，相信各位小伙伴都或多或少玩过这个简单的游戏。<br>对于游戏AI设计，我们引进了一个“权重”想法，通过对上下左右等一个点位的八个方向进行分析，通过各个方向的权重求和的方式获得该点最终的权重值。</p>
<p>当用户和AI进行对弈时：首先我们先建立起博弈树，继而通过估值函数算法计算落棋点的权重值，然后用Alpha-Beta剪枝加快搜索效率，最终取得最终的落棋点。</p>
<h4 id="估值函数设计"><a href="#估值函数设计" class="headerlink" title="估值函数设计"></a>估值函数设计</h4><ul>
<li>首先遍历整个棋盘，如果该点非空，进入该点权重计算</li>
<li>该点向左遍历，出现连续同色的棋子，进行加1，cnt++</li>
<li>向右遍历，出现连续同色的棋子，进行加1，cnt++</li>
<li>若两边无封堵、则权重= cnt<em>cnt</em>颜色的值（白：1，黑-1）</li>
<li>若一边出现封堵，则权重= cnt<em>cnt</em>颜色的值/4</li>
<li>若两边封堵，则权重=0；</li>
<li>若 cnt 大于等与5，权重为最大值*颜色的值（白：1，黑-1）</li>
<li>总权重是每个点四个方向（行、列、左右对角线）的权重之和</li>
</ul>
<p>估值函数代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMark</span><span class="params">()</span></span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=size;++i)&#123;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=size;++j)&#123;  </span><br><span class="line">            <span class="keyword">if</span>(chessBoard[i][j]!=<span class="number">0</span>)&#123;  </span><br><span class="line">                <span class="comment">// 行  </span></span><br><span class="line">                <span class="keyword">boolean</span> flag1=<span class="keyword">false</span>,flag2=<span class="keyword">false</span>;  </span><br><span class="line">                <span class="keyword">int</span> x=j,y=i;  </span><br><span class="line">                <span class="keyword">int</span> cnt=<span class="number">1</span>;  </span><br><span class="line">                <span class="keyword">int</span> col=x,row=y;  </span><br><span class="line">                <span class="keyword">while</span>(--col&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(col&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag1=<span class="keyword">true</span>;  </span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                <span class="keyword">while</span>(++col&lt;=size &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(col&lt;=size &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag2=<span class="keyword">true</span>;  </span><br><span class="line">                <span class="keyword">if</span>(flag1 &amp;&amp; flag2)  </span><br><span class="line">                    res+=chessBoard[i][j]*cnt*cnt;  </span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(flag1 || flag2) res+=chessBoard[i][j]*cnt*cnt/<span class="number">4</span>;   </span><br><span class="line">                <span class="keyword">if</span>(cnt&gt;=<span class="number">5</span>) res=MAXN*chessBoard[i][j];  </span><br><span class="line">                <span class="comment">// 列  </span></span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                cnt=<span class="number">1</span>;flag1=<span class="keyword">false</span>;flag2=<span class="keyword">false</span>;  </span><br><span class="line">                <span class="keyword">while</span>(--row&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(row&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag1=<span class="keyword">true</span>;  </span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                <span class="keyword">while</span>(++row&lt;=size &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(row&lt;=size &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag2=<span class="keyword">true</span>;  </span><br><span class="line">                <span class="keyword">if</span>(flag1 &amp;&amp; flag2)  </span><br><span class="line">                    res+=chessBoard[i][j]*cnt*cnt;  </span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(flag1 || flag2)  </span><br><span class="line">                    res+=chessBoard[i][j]*cnt*cnt/<span class="number">4</span>;  </span><br><span class="line">                <span class="keyword">if</span>(cnt&gt;=<span class="number">5</span>) res=MAXN*chessBoard[i][j];  </span><br><span class="line">                <span class="comment">// 左对角线  </span></span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                cnt=<span class="number">1</span>;flag1=<span class="keyword">false</span>;flag2=<span class="keyword">false</span>;  </span><br><span class="line">                <span class="keyword">while</span>(--col&gt;<span class="number">0</span> &amp;&amp; --row&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(col&gt;<span class="number">0</span> &amp;&amp; row&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag1=<span class="keyword">true</span>;  </span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                <span class="keyword">while</span>(++col&lt;=size &amp;&amp; ++row&lt;=size &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(col&lt;=size &amp;&amp; row&lt;=size &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag2=<span class="keyword">true</span>;  </span><br><span class="line">                <span class="keyword">if</span>(flag1 &amp;&amp; flag2)    </span><br><span class="line">                    res+=chessBoard[i][j]*cnt*cnt;  </span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(flag1 || flag2) res+=chessBoard[i][j]*cnt*cnt/<span class="number">4</span>;  </span><br><span class="line">                <span class="keyword">if</span>(cnt&gt;=<span class="number">5</span>) res=MAXN*chessBoard[i][j];  </span><br><span class="line">                <span class="comment">// 右对角线  </span></span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                cnt=<span class="number">1</span>;flag1=<span class="keyword">false</span>;flag2=<span class="keyword">false</span>;  </span><br><span class="line">                <span class="keyword">while</span>(++row&lt;=size &amp;&amp; --col&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(row&lt;=size &amp;&amp; col&gt;<span class="number">0</span> &amp;&amp; chessBoard[row][col]==<span class="number">0</span>) flag1=<span class="keyword">true</span>;  </span><br><span class="line">                col=x;row=y;  </span><br><span class="line">                <span class="keyword">while</span>(--row&gt;<span class="number">0</span> &amp;&amp; ++col&lt;=size &amp;&amp; chessBoard[row][col]==chessBoard[y][x]) ++cnt;  </span><br><span class="line">                <span class="keyword">if</span>(row&gt;<span class="number">0</span> &amp;&amp; col&lt;=size &amp;&amp; chessBoard[i][j]==<span class="number">0</span>) flag2=<span class="keyword">true</span>;  </span><br><span class="line">                <span class="keyword">if</span>(flag1 &amp;&amp; flag2)  </span><br><span class="line">                    res+=chessBoard[i][j]*cnt*cnt;  </span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(flag1 || flag2) res+=chessBoard[i][j]*cnt*cnt/<span class="number">4</span>;  </span><br><span class="line">                <span class="keyword">if</span>(cnt&gt;=<span class="number">5</span>) res=MAXN*chessBoard[i][j];  </span><br><span class="line">                  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> res;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Alpha-Beta剪枝-博弈树"><a href="#Alpha-Beta剪枝-博弈树" class="headerlink" title="Alpha-Beta剪枝+博弈树"></a>Alpha-Beta剪枝+博弈树</h3><h4 id="极大极小博弈算法"><a href="#极大极小博弈算法" class="headerlink" title="极大极小博弈算法:"></a>极大极小博弈算法:</h4><p>该算法是考虑双方博弈若干步之后，从可能的选择中选择一个相对好的选择，即在有限的搜索深度范围内进行求解。<br>规定如下：</p>
<ol>
<li>MAX 和 MIN 代表博弈双</li>
<li>f(p)表示状态评估得分</li>
<li>有利于MAX: f(p) &gt; 0；有利于MIN: f(p) &lt; 0;</li>
<li>零和博弈</li>
</ol>
<p>基本思想：</p>
<ul>
<li>MIN走步时，MAX要考虑最坏的情况 （ f(p)最小 ）</li>
<li>MAX走步时，MAX要考虑最好的情况（ f(p)最大 ）</li>
</ul>
<p>程序中我们设置为 AI 先手，则博弈树的第一层便是电脑所有的可能走法，第二层就是玩家的可能走法，根据上述的原则，我们设计的博弈树将每一个结点展开，通过递归遍历，这时候问题便来了，我们如果才能知道哪一个分支才是最优的，这时候我们就用到了上述的估值函数，根据分数的正负和大小确定对玩家和 AI 的利弊程度。此时我们便用到了上述算法的基本思想，在电脑走棋时，在 MAX 层选出高分，玩家奏起，在 MIN 层选出低分。故而完成了极大极小博弈树的逻辑设定。</p>
<h4 id="采用-Alpha-Beta-剪枝"><a href="#采用-Alpha-Beta-剪枝" class="headerlink" title="采用 Alpha-Beta 剪枝"></a>采用 Alpha-Beta 剪枝</h4><p>由于在上述的博弈树中，很多结点其实是“没有价值”的，所以无论是否遍历这些结点的数据，对最终的结果都毫无影响，进而我们选择 Alpha-Beta 剪枝剪掉那些没用的分支，当然，你也可以计算，如果不剪枝，那么一个简单的五子棋 AI 算法将会耗费多大的电脑资源，在此不做赘述，</p>
<h4 id="剪枝原理"><a href="#剪枝原理" class="headerlink" title="剪枝原理"></a>剪枝原理</h4><p>剪枝算法的基本依据是：棋手不会做出对自己不利的选择。<br>依据这个前提，如果一个节点明显是不利于自己的节点，那么就可以直接剪掉这个节点。</p>
<p>前面说到，AI会在MAX层分数最大的结点，而玩家会在MIN层选择最小结点，那么便可分析如下：</p>
<p>在MAX层，假设当前层已经搜索到一个最大值 X， 如果发现下一个节点的下一层MIN会产生一个比X还小的值，那么就直接剪掉此节点。</p>
<p>简单来说，就是AI发现这一步是对玩家更有利的，所以不会走这一步。</p>
<p>在MIN层，假设当前层已经搜索到一个最小值 Y， 如果发现下一个节点的下一层MIN层会产生一个比Y还大的值，那么就直接剪掉此节点。</p>
<p>其实MAX和MIN层道理相似。</p>
<p>代码实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// alpha beta dfs  </span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> deep,Node root,<span class="keyword">int</span> alpha,<span class="keyword">int</span> beta,Point p)</span></span>&#123;  </span><br><span class="line">     <span class="keyword">if</span>(deep==searchDeep)&#123;  </span><br><span class="line">         root.mark=getMark();  </span><br><span class="line">         <span class="comment">// System.out.printf("%d\t%d\t%d\n",p.x,p.y,root.mark);  </span></span><br><span class="line">         <span class="keyword">return</span>;  </span><br><span class="line">     &#125;  </span><br><span class="line">     ArrayList&lt;Point&gt; judgeSet=<span class="keyword">new</span> ArrayList&lt;Point&gt;();  </span><br><span class="line">     Iterator it=toJudge.iterator();  </span><br><span class="line">     <span class="keyword">while</span>(it.hasNext())&#123;  </span><br><span class="line">         Point now=<span class="keyword">new</span> Point((Point)it.next());  </span><br><span class="line">         judgeSet.add(now);  </span><br><span class="line">     &#125;  </span><br><span class="line">     it=judgeSet.iterator();  </span><br><span class="line">     <span class="keyword">while</span>(it.hasNext())&#123;  </span><br><span class="line">         Point now=<span class="keyword">new</span> Point((Point)it.next());  </span><br><span class="line">         Node node=<span class="keyword">new</span> Node();  </span><br><span class="line">         node.setPoint(now);  </span><br><span class="line">         root.addChild(node);  </span><br><span class="line">         <span class="keyword">boolean</span> flag=toJudge.contains(now);  </span><br><span class="line">         chessBoard[now.y][now.x]=((deep&amp;<span class="number">1</span>)==<span class="number">1</span>)?-<span class="number">1</span>:<span class="number">1</span>;  </span><br><span class="line">         <span class="keyword">if</span>(isEnd(now.x,now.y))&#123;  </span><br><span class="line">             root.bestChild=node;  </span><br><span class="line">             root.mark=MAXN*chessBoard[now.y][now.x];  </span><br><span class="line">             chessBoard[now.y][now.x]=<span class="number">0</span>;  </span><br><span class="line">             <span class="keyword">return</span>;  </span><br><span class="line">         &#125;  </span><br><span class="line">  </span><br><span class="line">         <span class="keyword">boolean</span> flags[]=<span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">8</span>]; <span class="comment">//标记回溯时要不要删掉  </span></span><br><span class="line">         Arrays.fill(flags,<span class="keyword">true</span>);  </span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;++i)&#123;  </span><br><span class="line">             Point next=<span class="keyword">new</span> Point(now.x+dc[i],now.y+dr[i]);  </span><br><span class="line">             <span class="keyword">if</span>(<span class="number">1</span>&lt;=now.x+dc[i] &amp;&amp; now.x+dc[i]&lt;=size &amp;&amp; <span class="number">1</span>&lt;=now.y+dr[i] &amp;&amp; now.y+dr[i]&lt;=size &amp;&amp; chessBoard[next.y][next.x]==<span class="number">0</span>)&#123;  </span><br><span class="line">                 <span class="keyword">if</span>(!toJudge.contains(next))&#123;  </span><br><span class="line">                     toJudge.add(next);  </span><br><span class="line">                 &#125;  </span><br><span class="line">                 <span class="keyword">else</span> flags[i]=<span class="keyword">false</span>;  </span><br><span class="line">             &#125;  </span><br><span class="line">         &#125;  </span><br><span class="line">           </span><br><span class="line">         <span class="keyword">if</span>(flag)   </span><br><span class="line">             toJudge.remove(now);  </span><br><span class="line">         dfs(deep+<span class="number">1</span>,root.getLastChild(),alpha,beta,now);  </span><br><span class="line">         chessBoard[now.y][now.x]=<span class="number">0</span>;  </span><br><span class="line">         <span class="keyword">if</span>(flag)  </span><br><span class="line">             toJudge.add(now);  </span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;++i)  </span><br><span class="line">             <span class="keyword">if</span>(flags[i])  </span><br><span class="line">                 toJudge.remove(<span class="keyword">new</span> Point(now.x+dc[i],now.y+dr[i]));  </span><br><span class="line">         <span class="comment">// alpha beta剪枝  </span></span><br><span class="line">         <span class="comment">// min层  </span></span><br><span class="line">         <span class="keyword">if</span>((deep&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;  </span><br><span class="line">             <span class="keyword">if</span>(root.bestChild==<span class="keyword">null</span> || root.getLastChild().mark&lt;root.bestChild.mark)&#123;  </span><br><span class="line">                 root.bestChild=root.getLastChild();  </span><br><span class="line">                 root.mark=root.bestChild.mark;  </span><br><span class="line">                 <span class="keyword">if</span>(root.mark&lt;=MINN)  </span><br><span class="line">                     root.mark+=deep;  </span><br><span class="line">                 beta=Math.min(root.mark,beta);  </span><br><span class="line">             &#125;  </span><br><span class="line">             <span class="keyword">if</span>(root.mark&lt;=alpha)  </span><br><span class="line">                 <span class="keyword">return</span>;  </span><br><span class="line">         &#125;  </span><br><span class="line">         <span class="comment">// max层  </span></span><br><span class="line">         <span class="keyword">else</span>&#123;  </span><br><span class="line">             <span class="keyword">if</span>(root.bestChild==<span class="keyword">null</span> || root.getLastChild().mark&gt;root.bestChild.mark)&#123;  </span><br><span class="line">                 root.bestChild=root.getLastChild();  </span><br><span class="line">                 root.mark=root.bestChild.mark;  </span><br><span class="line">                 <span class="keyword">if</span>(root.mark==MAXN)  </span><br><span class="line">                     root.mark-=deep;  </span><br><span class="line">                 alpha=Math.max(root.mark,alpha);  </span><br><span class="line">             &#125;  </span><br><span class="line">             <span class="keyword">if</span>(root.mark&gt;=beta)  </span><br><span class="line">                 <span class="keyword">return</span>;  </span><br><span class="line">         &#125;  </span><br><span class="line">     &#125;  </span><br><span class="line">     <span class="comment">// if(deep==0) System.out.printf("******************************************\n");  </span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="小功能"><a href="#小功能" class="headerlink" title="小功能"></a>小功能</h3><h4 id="保存游戏截图"><a href="#保存游戏截图" class="headerlink" title="保存游戏截图"></a>保存游戏截图</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存文件image</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       BufferedImage image2 = getImage();</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 如果缩放了，恢复再保存</span></span><br><span class="line">       <span class="keyword">if</span> (SAVE_SCALED_IMAGES &amp;&amp; currentZoom != <span class="number">1</span>) &#123;</span><br><span class="line">           BufferedImage zoomedImage = <span class="keyword">new</span> BufferedImage(width * currentZoom, height * currentZoom, image.getType());</span><br><span class="line">           Graphics2D g = (Graphics2D) zoomedImage.getGraphics();</span><br><span class="line">           g.setColor(Color.BLACK);</span><br><span class="line">           <span class="keyword">if</span> (PRETTY) &#123;</span><br><span class="line">               g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);</span><br><span class="line">           &#125;</span><br><span class="line">           g.scale(currentZoom, currentZoom);</span><br><span class="line">           g.drawImage(image2, <span class="number">0</span>, <span class="number">0</span>, imagePanel);</span><br><span class="line">           image2 = zoomedImage;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span> lastDot = filename.lastIndexOf(<span class="string">"."</span>);</span><br><span class="line">       String extension = filename.substring(lastDot + <span class="number">1</span>);</span><br><span class="line">       ImageIO.write(image2, extension, <span class="keyword">new</span> File(filename));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取鼠标实时坐标"><a href="#获取鼠标实时坐标" class="headerlink" title="获取鼠标实时坐标"></a>获取鼠标实时坐标</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// 实现鼠标事件接口  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMouseEvent</span> <span class="keyword">implements</span> <span class="title">MouseListener</span></span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseClicked</span><span class="params">(MouseEvent e)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">int</span> x=round(e.getX()),y=round(e.getY());  </span><br><span class="line">        <span class="keyword">if</span>(x&gt;=<span class="number">45</span> &amp;&amp; x&lt;=<span class="number">675</span> &amp;&amp; y&gt;=<span class="number">45</span> &amp;&amp; y&lt;=<span class="number">675</span> &amp;&amp; Ai.chessBoard[y/<span class="number">45</span>][x/<span class="number">45</span>]==<span class="number">0</span> &amp;&amp; Ai.isBlack==<span class="keyword">false</span>)&#123;  </span><br><span class="line">            Ai.putChess(x,y);  </span><br><span class="line">            <span class="keyword">if</span>(!Ai.isFinished)&#123;  </span><br><span class="line">                Ai.isBlack=<span class="keyword">true</span>;  </span><br><span class="line">                Ai.myAI();  </span><br><span class="line">            &#125;  </span><br><span class="line">            Ai.isFinished=<span class="keyword">false</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 得到鼠标点击点附近的棋盘精准点  </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">round</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> (x%<span class="number">45</span>&lt;<span class="number">22</span>)?x/<span class="number">45</span>*<span class="number">45</span>:x/<span class="number">45</span>*<span class="number">45</span>+<span class="number">45</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseExited</span><span class="params">(MouseEvent e)</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseEntered</span><span class="params">(MouseEvent e)</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseReleased</span><span class="params">(MouseEvent e)</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mousePressed</span><span class="params">(MouseEvent e)</span></span>&#123;&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="棋盘的放大缩小"><a href="#棋盘的放大缩小" class="headerlink" title="棋盘的放大缩小"></a>棋盘的放大缩小</h4><p>……<br>欢迎访问开源链接<a href="https://github.com/rockzhai/AI-Wuziqi" target="_blank" rel="noopener">https://github.com/rockzhai/AI-Wuziqi</a> ，代码都在里面。</p>
<h3 id="参考文章及开源项目"><a href="#参考文章及开源项目" class="headerlink" title="参考文章及开源项目"></a>参考文章及开源项目</h3><p><a href="https://jysperm.me/2016/06/wizard-chess/" target="_blank" rel="noopener">一个国际象棋AI的实现</a><br><a href="http://blog.csdn.net/lihongxun945/article/details/50668253" target="_blank" rel="noopener">五子棋AI算法系列</a><br>开发过程中在网上发现一开源项目，程序中有多处参考其程序，时间过去略久，设备更换，未能找到对的链接，在此特别感谢其开源精神，作为感谢，会在开源的路上越走越远，致敬。</p>
<p>如果后续发现会附在文章的最后，谢谢阅读。</p>
<p>分享总是美好的。</p>
</div><div class="tags"><a href="/tags/Java/"><i class="fa fa-tag"></i>Java</a><a href="/tags/Alpha-beta/"><i class="fa fa-tag"></i>Alpha-beta</a></div><div class="post-nav"><a class="pre" href="/2017/07/04/Listen%20to%20the%20Rain/">听雨落</a><a class="next" href="/2017/02/24/android-ble-lock/">Android-BLE-Lock智能门锁客户端实践</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://zhaidongyan.cn"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Emotion/">Emotion</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Security/">Security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Technology/">Technology</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Translate/">Translate</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/diary/" style="font-size: 15px;">diary</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/MVC/" style="font-size: 15px;">MVC</a> <a href="/tags/MVP/" style="font-size: 15px;">MVP</a> <a href="/tags/Sec/" style="font-size: 15px;">Sec</a> <a href="/tags/Alpha-beta/" style="font-size: 15px;">Alpha-beta</a> <a href="/tags/Activity/" style="font-size: 15px;">Activity</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" style="font-size: 15px;">系统启动流程</a> <a href="/tags/Stability/" style="font-size: 15px;">Stability</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/View/" style="font-size: 15px;">View</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/RegEx/" style="font-size: 15px;">RegEx</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/11/21/LetterForJS01/">一封“相识”一周年的信</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/22/Sec.Android:begin/">移动安全--开篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/07/translate_flutter-5-reasons-why-you-may-love-it/">【译】Flutter — 五个你会爱上它的原因</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/01/translate_confusion-subject-observable-observer-android-rxjava2-hell-part8/">【译】Subject 和 Observable + Observer 的混淆指北[ Android RxJava2 ] ( 这什么鬼系列 ) 第八话</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/10/Java_JVM_classloader/">虚拟机类加载机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/05/Java_reference/">引用类型分析与总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/04/Java_input_output_stream/">输入输出流</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/03/Java_data%20structure_Hashmap/">数据结构实现原理之 HashMap</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/21/Java_data%20structure_ArrayList/">数据结构实现原理之 ArrayList</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/Java_BasicKnowledge/">基础知识点梳理</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">二十七.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>